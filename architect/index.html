<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Ehsan N. Moosa "><meta name=description content="Big Picture Rony provides facilities to implement clustered services quickly. When you write your service using Rony framework, you write the minimum amount of boiler-place code. Most of the code generated by Rony.
Components Edge The outermost layer of Rony is edge.Server. This is the only object which you need to access all the capabilities of Rony. Edge servers are identifies by their unique id (i.e., replica set) in a cluster."><meta name=keywords content=",wiki,install,guide"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://rony.ronaksoft.com/architect/><title>Architect :: Rony's Wiki â€” Hello Friend NG Theme</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://rony.ronaksoft.com/main.031a8efc33f94f55a4071bf4e91596478a5809fc8c148fab113801189cfd2152.css><link rel=apple-touch-icon sizes=180x180 href=https://rony.ronaksoft.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://rony.ronaksoft.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://rony.ronaksoft.com/favicon-16x16.png><link rel=manifest href=https://rony.ronaksoft.com/site.webmanifest><link rel=mask-icon href=https://rony.ronaksoft.com/safari-pinned-tab.svg color=#1b1c1d><link rel="shortcut icon" href=https://rony.ronaksoft.com/favicon.ico><meta name=msapplication-TileColor content="#1b1c1d"><meta name=theme-color content="#1b1c1d"><meta itemprop=name content="Architect"><meta itemprop=description content="Big Picture Rony provides facilities to implement clustered services quickly. When you write your service using Rony framework, you write the minimum amount of boiler-place code. Most of the code generated by Rony.
Components Edge The outermost layer of Rony is edge.Server. This is the only object which you need to access all the capabilities of Rony. Edge servers are identifies by their unique id (i.e., replica set) in a cluster."><meta itemprop=datePublished content="2021-07-26T14:33:20+04:30"><meta itemprop=dateModified content="2021-07-26T14:33:20+04:30"><meta itemprop=wordCount content="518"><meta itemprop=image content="https://rony.ronaksoft.com"><meta itemprop=keywords content="wiki,install,guide,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rony.ronaksoft.com"><meta name=twitter:title content="Architect"><meta name=twitter:description content="Big Picture Rony provides facilities to implement clustered services quickly. When you write your service using Rony framework, you write the minimum amount of boiler-place code. Most of the code generated by Rony.
Components Edge The outermost layer of Rony is edge.Server. This is the only object which you need to access all the capabilities of Rony. Edge servers are identifies by their unique id (i.e., replica set) in a cluster."><meta property="og:title" content="Architect"><meta property="og:description" content="Big Picture Rony provides facilities to implement clustered services quickly. When you write your service using Rony framework, you write the minimum amount of boiler-place code. Most of the code generated by Rony.
Components Edge The outermost layer of Rony is edge.Server. This is the only object which you need to access all the capabilities of Rony. Edge servers are identifies by their unique id (i.e., replica set) in a cluster."><meta property="og:type" content="article"><meta property="og:url" content="https://rony.ronaksoft.com/architect/"><meta property="og:image" content="https://rony.ronaksoft.com"><meta property="article:section" content><meta property="article:published_time" content="2021-07-26T14:33:20+04:30"><meta property="article:modified_time" content="2021-07-26T14:33:20+04:30"><meta property="article:section" content="wiki"><meta property="article:published_time" content="2021-07-26 14:33:20 +0430 +0430"></head><body><div class=container><header class=header><span class=header__inner><a href=https://rony.ronaksoft.com/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://rony.ronaksoft.com/introduction/>Introduction</a></li><li><a href=https://rony.ronaksoft.com/getting-started/>Getting Started</a></li><li><a href=https://rony.ronaksoft.com/architect/>Architect</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://rony.ronaksoft.com/architect/>Architect</a></h2><div class=post-content><h1 id=big-picture>Big Picture</h1><p>Rony provides facilities to implement clustered services quickly. When you write your service
using Rony framework, you write the minimum amount of boiler-place code. Most of the code generated
by Rony.</p><img src=https://rony.ronaksoft.com/images/rony_overview.png alt="Architect Diagram" class=center style=border-radius:8px><h2 id=components>Components</h2><h3 id=edge>Edge</h3><p>The outermost layer of Rony is <code>edge.Server</code>. This is the only object which you need to
access all the capabilities of Rony. Edge servers are identifies by their unique id (i.e., replica set)
in a cluster. When you write your code you can do different actions depending on the replica-set of the
current node, find other edge servers by their replica-set or their unique id.</p><p>Edge servers are build of other sub-components. Gateway, Cluster, Tunnel and Store. In following we
explain what is their responsibility of each component.</p><h4 id=1-gateway>1. Gateway</h4><p>Gateway is the only component of the edge which MUST be setup. You cannot have an edge server without
any gateway defined. Gateway manages the connection between <code>edge.Server</code> and external clients. Clients
could talk to the gateway by <code>http</code>, <code>websocket</code> or both.</p><h4 id=2-cluster>2. Cluster</h4><p>Cluster is an OPTIONAL component of the edge server. Cluster manages the cluster as its name spoiled.
You set up cluster when initializing your edge server. Cluster communicates with each other by using gossip protocol.
You can get information about the current node or any other node in the cluster by accessing <code>Cluster</code> components.</p><h4 id=3-tunnel>3. Tunnel</h4><p>Tunnel is an OPTIONAL component of the edge server. Tunnel provides end-to-end communication between edge server.
Rony recommends to use <code>Tunnel</code> with the information collected from <code>Cluster</code> component.</p><h4 id=4-store>4. Store</h4><p>Store is a REQUIRED component of the edge server. Store provides persistent key-value store. It is useful and could be
used to by you to extend your ability to save structured data locally. It supports TTL on keys.</p><hr><h2 id=context>Context</h2><p>Rony has three type contexts. They provide three layer of separation. <code>rony.Conn</code> <code>edge.DispatchCtx</code> and
<code>edge.RequestCtx</code> are the layered contexts of Rony.</p><pre tabindex=0><code>|--- Conn ----------------------------------------|
|   |--- DispatchCtx --------------------------|  |
|   |   |--- RequestCtx -------------------|   |  |
|   |   |--- RequestCtx -------------------|   |  |
|   |   |   .                              |   |  |
|   |   |   .                              |   |  |
|   |------------------------------------------|  |
|                                                 |
|   |--- DispatchCtx --------------------------|  |
|   |   |--- RequestCtx -------------------|   |  |
|   |   |--- RequestCtx -------------------|   |  |
|   |------------------------------------------|  |
|                                                 |
|                      .                          |
|                      .                          |
|-------------------------------------------------|
</code></pre><h3 id=1-conn>1. Conn</h3><p>Conn is the outermost context. It is created when a connection established between client and edge
server. It is destroyed when the connection closed. Connections could be Persistent (i.e., websocket) or
Non-Persistent (i.e., http).</p><h3 id=2-dispatchctx>2. DispatchCtx</h3><p>DispatchCtx is created when a message (i.e., MessageEnvelop or MessageContainer) received. It will exist until the last
request executed. In other words if the received message was <code>MessageEnvelope</code> then DispatchCtx has only one <code>RequestCtx</code>
and if the received message was <code>MessageContainer</code> then DispatchCtx has as many <code>RequestCtx</code> as the number of message envelops
it contains.</p><h3 id=3-requestctx>3. RequestCtx</h3><p>RequestCtx is the latest context which actually is accessed by the developer. Each RPC handler has a reference to its
<code>RequestCtx</code>. You have access to other sub-components such as Cluster, Tunnel and Store through the <code>RequestCtx</code>.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://rony.ronaksoft.com/tags/wiki/>wiki</a></span>
<span class=tag><a href=https://rony.ronaksoft.com/tags/install/>install</a></span>
<span class=tag><a href=https://rony.ronaksoft.com/tags/guide/>guide</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://rony.ronaksoft.com/categories/wiki/>wiki</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2022</span>
<span><a href=https://rony.ronaksoft.com>Ehsan N. Moosa</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></span>
<span><a href=https://rony.ronaksoft.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span></div></div></footer></div><script type=text/javascript src=https://rony.ronaksoft.com/bundle.min.feebdc8d801e3fb1791305e362b6d11557f029604dd5b3c27e2686bc88787ee90ae1ccf0afe81bd7d959d7617cfe1fc73062aa82b4e1fa830d6941193d2cbddf.js integrity="sha512-/uvcjYAeP7F5EwXjYrbRFVfwKWBN1bPCfiaGvIh4fukK4czwr+gb19lZ12F8/h/HMGKqgrTh+oMNaUEZPSy93w=="></script></body></html>